<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stellantis - Production Tracking System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
        }

        .login-container {
            max-width: 420px;
            width: 100%;
            padding: 30px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            animation: slideUp 0.6s ease;
        }

        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .login-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .login-logo {
            font-size: 2rem;
            font-weight: 800;
            background: linear-gradient(135deg, #0055A4 0%, #0072CE 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 5px;
        }

        .login-subtitle {
            color: #666;
            font-size: 1rem;
            font-weight: 400;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #0055A4;
            font-size: 0.95rem;
        }

        .form-control {
            width: 100%;
            padding: 14px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: #fafafa;
            text-align: center;
            letter-spacing: 2px;
        }

        .form-control:focus {
            border-color: #0055A4;
            outline: none;
            background: white;
            box-shadow: 0 0 0 3px rgba(0,85,164,0.1);
        }

        .btn {
            background: linear-gradient(135deg, #0055A4 0%, #0072CE 100%);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: 700;
            width: 100%;
            cursor: pointer;
            margin: 15px 0;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(0,85,164,0.2);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0,85,164,0.3);
        }

        .btn:active {
            transform: translateY(0);
        }

        .support-card {
            background: linear-gradient(135deg, #0055A4 0%, #0072CE 100%);
            color: white;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            margin: 20px 0;
            box-shadow: 0 5px 20px rgba(0,85,164,0.2);
        }

        .hidden {
            display: none !important;
        }

        .admin-badge {
            background: linear-gradient(135deg, #dc3545 0%, #e35d6a 100%);
            color: white;
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            font-weight: 700;
            margin-right: 10px;
            box-shadow: 0 2px 5px rgba(220,53,69,0.3);
        }
    </style>
</head>
<body>
    <!-- Login Page -->
    <div id="loginPage">
        <div class="login-container">
            <div class="login-header">
                <div class="login-logo">STELLANTIS</div>
                <div class="login-subtitle">نظام تتبع الإنتاج</div>
            </div>
            
            <form id="loginForm">
                <div class="form-group">
                    <label for="accessCode">كود الدخول</label>
                    <input type="password" id="accessCode" class="form-control" required placeholder="أدخل كود الدخول">
                </div>
                
                <div class="form-group hidden" id="workerForm">
                    <label for="workerName">الاسم</label>
                    <input type="text" id="workerName" class="form-control" required placeholder="أدخل اسمك">
                    
                    <label for="engineModel" style="margin-top: 15px;">المحطة</label>
                    <select id="engineModel" class="form-control" required>
                        <option value="">اختر المحطة</option>
                        <option value="M1">M1</option>
                        <option value="M2">M2</option>
                        <option value="M3">M3</option>
                        <option value="M4">M4</option>
                        <option value="M5">M5</option>
                        <option value="M6">M6</option>
                        <option value="M7">M7</option>
                    </select>
                </div>
                
                <button type="submit" class="btn" id="loginBtn">دخول</button>
            </form>
            
            <div class="support-card">
                <strong>الدعم الفني</strong>
                <div style="margin-top: 15px;">
                    <div style="font-size: 1.1rem;">KHALID MESSAOUDI</div>
                    <div style="font-size: 1.3rem; font-weight: bold; margin: 10px 0;">0611938119</div>
                    <div>من 8:00 إلى 17:00</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Main App -->
    <div id="mainApp" class="hidden">
        <!-- Header -->
        <header style="background: linear-gradient(135deg, #0055A4 0%, #0072CE 100%); color: white; padding: 15px; text-align: center; position: relative;">
            <button class="logout-btn" onclick="logout()" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                <i class="fas fa-sign-out-alt"></i> خروج
            </button>
            <div style="font-size: 1.3rem; font-weight: bold;">نظام تتبع الإنتاج</div>
            <div style="font-size: 0.9rem; margin-top: 5px;" id="currentTime"></div>
            <div id="userName"></div>
        </header>

        <!-- Navigation -->
        <nav style="background: linear-gradient(135deg, #0072CE 0%, #0055A4 100%); display: flex; overflow-x: auto; padding: 12px; gap: 8px;">
            <button class="nav-btn active" data-page="dashboard" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">الرئيسية</button>
            <button class="nav-btn" data-page="production" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">إدخال البيانات</button>
            <button class="nav-btn" data-page="support" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">المساعدة</button>
        </nav>

        <div style="padding: 20px;">
            <!-- Dashboard Page -->
            <div id="dashboardPage" class="page active" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #0055A4; margin-bottom: 20px; text-align: center;">لوحة التحكم</h2>
                <div style="text-align: center; margin: 25px 0;">
                    <p>مرحباً بك في نظام تتبع الإنتاج</p>
                    <p style="margin-top: 10px;">يمكنك إدخال بيانات الإنتاج من صفحة "إدخال البيانات"</p>
                </div>
            </div>

            <!-- Production Page -->
            <div id="productionPage" class="page" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #0055A4; margin-bottom: 20px; text-align: center;">إدخال بيانات الإنتاج</h2>
                <div style="text-align: center;">
                    <p>نموذج إدخال بيانات الإنتاج</p>
                </div>
            </div>

            <!-- Support Page -->
            <div id="supportPage" class="page" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #0055A4; margin-bottom: 20px; text-align: center;">مركز المساعدة</h2>
                <div style="text-align: center;">
                    <p>الدعم الفني: 0611938119</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Admin App -->
    <div id="adminApp" class="hidden">
        <!-- Header -->
        <header style="background: linear-gradient(135deg, #dc3545 0%, #e35d6a 100%); color: white; padding: 15px; text-align: center; position: relative;">
            <button class="logout-btn" onclick="adminLogout()" style="position: absolute; left: 15px; top: 50%; transform: translateY(-50%); background: rgba(255,255,255,0.2); border: 1px solid rgba(255,255,255,0.3); color: white; padding: 8px 15px; border-radius: 20px; font-size: 0.8rem; cursor: pointer;">
                <i class="fas fa-sign-out-alt"></i> خروج
            </button>
            <div style="font-size: 1.3rem; font-weight: bold;">لوحة تحكم المدير <span class="admin-badge">مدير</span></div>
            <div style="font-size: 0.9rem; margin-top: 5px;" id="adminCurrentTime"></div>
            <div>مدير النظام</div>
        </header>

        <!-- Navigation -->
        <nav style="background: linear-gradient(135deg, #e35d6a 0%, #dc3545 100%); display: flex; overflow-x: auto; padding: 12px; gap: 8px;">
            <button class="nav-btn active" data-page="adminDashboard" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">نظرة عامة</button>
            <button class="nav-btn" data-page="adminData" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">جميع البيانات</button>
            <button class="nav-btn" data-page="adminSupport" style="background: rgba(255,255,255,0.95); border: none; padding: 12px 18px; border-radius: 25px; font-size: 0.85rem; font-weight: 600; cursor: pointer;">المساعدة</button>
        </nav>

        <div style="padding: 20px;">
            <!-- Admin Dashboard -->
            <div id="adminDashboardPage" class="page active" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #dc3545; margin-bottom: 20px; text-align: center;">لوحة تحكم المدير</h2>
                <div style="text-align: center;">
                    <p>مرحباً بك في لوحة تحكم المدير</p>
                    <p style="margin-top: 10px;">يمكنك عرض جميع البيانات من صفحة "جميع البيانات"</p>
                </div>
            </div>

            <!-- Admin Data -->
            <div id="adminDataPage" class="page" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #dc3545; margin-bottom: 20px; text-align: center;">جميع بيانات الإنتاج</h2>
                <div style="text-align: center;">
                    <p>عرض جميع البيانات المسجلة في النظام</p>
                </div>
            </div>

            <!-- Admin Support -->
            <div id="adminSupportPage" class="page" style="background: white; padding: 25px; border-radius: 15px; margin: 20px 0; box-shadow: 0 5px 20px rgba(0,0,0,0.08);">
                <h2 style="color: #dc3545; margin-bottom: 20px; text-align: center;">مركز مساعدة المدير</h2>
                <div style="text-align: center;">
                    <p>الدعم الفني للمدير: 0611938119</p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // تهيئة التطبيق
        let currentUser = null;
        const accessCodeInput = document.getElementById('accessCode');
        const workerForm = document.getElementById('workerForm');
        const loginBtn = document.getElementById('loginBtn');
        const loginPage = document.getElementById('loginPage');
        const mainApp = document.getElementById('mainApp');
        const adminApp = document.getElementById('adminApp');

        // إعداد معالج الأحداث
        function setupEventListeners() {
            // تحقق من كود الدخول أثناء الكتابة
            accessCodeInput.addEventListener('input', function() {
                const code = this.value.toUpperCase();
                if (code === 'PSA' || code.startsWith('PSA')) {
                    workerForm.classList.remove('hidden');
                    loginBtn.textContent = 'دخول';
                } else if (code === 'ADMIN' || code.startsWith('ADMIN')) {
                    workerForm.classList.add('hidden');
                    loginBtn.textContent = 'دخول كمدير';
                } else {
                    workerForm.classList.add('hidden');
                    loginBtn.textContent = 'دخول';
                }
            });

            // التنقل بين الصفحات
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const pageId = this.getAttribute('data-page');
                    showPage(pageId);
                });
            });

            // تحديث الوقت الحالي
            updateCurrentTime();
            setInterval(updateCurrentTime, 1000);
        }

        function updateCurrentTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-EG');
            const dateString = now.toLocaleDateString('ar-EG', {
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            
            if (document.getElementById('currentTime')) {
                document.getElementById('currentTime').textContent = `${timeString} - ${dateString}`;
            }
            if (document.getElementById('adminCurrentTime')) {
                document.getElementById('adminCurrentTime').textContent = `${timeString} - ${dateString}`;
            }
        }

        function showPage(pageId) {
            // إخفاء جميع الصفحات
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            
            // إزالة النشاط من جميع أزرار التنقل
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // إظهار الصفحة المطلوبة
            document.getElementById(`${pageId}Page`).classList.add('active');
            
            // تفعيل زر التنقل المقابل
            document.querySelector(`.nav-btn[data-page="${pageId}"]`).classList.add('active');
        }

        function login(event) {
            event.preventDefault(); // منع إعادة تحميل الصفحة
            
            const accessCode = document.getElementById('accessCode').value.toUpperCase();
            console.log('كود الدخول المدخل:', accessCode); // للتتبع
            
            if (accessCode === 'ADMIN') {
                // دخول كمدير
                console.log('جاري الدخول كمدير...');
                loginPage.classList.add('hidden');
                adminApp.classList.remove('hidden');
                updateCurrentTime();
                return;
            } 
            
            if (accessCode === 'PSA') {
                // دخول كعامل
                const workerName = document.getElementById('workerName').value.trim();
                const engineModel = document.getElementById('engineModel').value;
                
                if (!workerName || !engineModel) {
                    alert('يرجى إدخال الاسم واختيار المحطة');
                    return;
                }
                
                // حفظ بيانات المستخدم
                currentUser = {
                    name: workerName,
                    station: engineModel,
                    isAdmin: false
                };
                
                console.log('جاري الدخول كعامل...');
                loginPage.classList.add('hidden');
                mainApp.classList.remove('hidden');
                
                // تحديث واجهة المستخدم
                document.getElementById('userName').textContent = workerName;
                updateCurrentTime();
                return;
            }
            
            alert('كود الدخول غير صحيح. استخدم PSA للعاملين أو ADMIN للمديرين');
        }

        function logout() {
            currentUser = null;
            mainApp.classList.add('hidden');
            adminApp.classList.add('hidden');
            loginPage.classList.remove('hidden');
            
            // إعادة تعيين نموذج الدخول
            document.getElementById('loginForm').reset();
            document.getElementById('workerForm').classList.add('hidden');
        }

        function adminLogout() {
            adminApp.classList.add('hidden');
            loginPage.classList.remove('hidden');
            document.getElementById('loginForm').reset();
        }

        // إعداد معالج الأحداث للنموذج
        document.getElementById('loginForm').addEventListener('submit', login);

        // بدء التطبيق
        setupEventListeners();

        // إضافة رسالة ترحيب في الكونسول
        console.log('تم تحميل نظام تتبع الإنتاج بنجاح!');
        console.log('استخدم PSA للدخول كعامل أو ADMIN للدخول كمدير');
    </script>
</body>
</html>